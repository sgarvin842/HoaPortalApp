@{
    ViewData["Title"] = "My Items - Submit a Request";
}

<div class="container mt-5">
    <!-- Messages Section -->
    <div class="card mb-4">
        <div class="card-body">
            <h2 class="card-title">Messages</h2>

            <!-- Filters for Messages -->
            <div class="row mb-3">
                <div class="col-md-3">
                    <input type="text" class="form-control" placeholder="Filter by From" id="filterFrom">
                </div>
                <div class="col-md-3">
                    <input type="text" class="form-control" placeholder="Filter by Subject" id="filterSubject">
                </div>
                <div class="col-md-3">
                    <input type="text" class="form-control" placeholder="Filter by Message" id="filterMessage">
                </div>
                <div class="col-md-3">
                    <input type="date" class="form-control" id="filterDate">
                </div>
            </div>

            <!-- Messages Table -->
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>From</th>
                        <th>Subject</th>
                        <th>Message</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody id="messageTableBody">
                    <tr>
                        <td>John Doe</td>
                        <td>Maintenance Issue</td>
                        <td>There's a broken pipe in my yard.</td>
                        <td>2024-10-12</td>
                    </tr>
                    <!-- More rows as needed -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Request Submission Section -->
    <div class="card mb-4">
        <div class="card-body">
            <h2 class="card-title">Submit a Request</h2>

            <!-- Request Type Selection -->
            <div class="form-group mb-4">
                <label>Select the type of request you would like to submit:</label>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="requestType" id="generalRequest" value="general">
                    <label class="form-check-label" for="generalRequest">General Request</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="requestType" id="arcRequest" value="arc">
                    <label class="form-check-label" for="arcRequest">ARC Request</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="requestType" id="reservationRequest" value="reservation">
                    <label class="form-check-label" for="reservationRequest">Reservation Request</label>
                </div>
            </div>

            <!-- General Request Form -->
            <div id="generalRequestForm" class="request-form d-none">
                <h3>General Request</h3>
                <form>
                    <div class="mb-3">
                        <label for="generalProperty" class="form-label">Property</label>
                        <select class="form-select" id="generalProperty" required>
                            <option selected disabled>Choose a property</option>
                            <option value="Property 1">Property 1</option>
                            <option value="Property 2">Property 2</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="generalSubject" class="form-label">Subject</label>
                        <input type="text" class="form-control" id="generalSubject" placeholder="Enter the subject" required>
                    </div>
                    <div class="mb-3">
                        <label for="generalDescription" class="form-label">Description</label>
                        <textarea class="form-control" id="generalDescription" rows="4" placeholder="Enter the description" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="generalAttachment" class="form-label">Attach Documents</label>
                        <input type="file" class="form-control" id="generalAttachment">
                    </div>
                    <button type="submit" class="btn btn-primary">Submit General Request</button>
                </form>
            </div>

            <!-- ARC Request Form -->
            <div id="arcRequestForm" class="request-form d-none">
                <h3>ARC Request</h3>
                <form>
                    <div class="mb-3">
                        <label for="arcProperty" class="form-label">Property</label>
                        <select class="form-select" id="arcProperty" required>
                            <option selected disabled>Choose a property</option>
                            <option value="Property 1">Property 1</option>
                            <option value="Property 2">Property 2</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="arcAreaOfWork" class="form-label">Area of Work</label>
                        <select class="form-select" id="arcAreaOfWork" required>
                            <option selected disabled>Choose an area of work</option>
                            <option value="Landscaping">Landscaping</option>
                            <option value="Exterior">Exterior</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="arcSubject" class="form-label">Subject</label>
                        <input type="text" class="form-control" id="arcSubject" placeholder="Enter the subject" required>
                    </div>
                    <div class="mb-3">
                        <label for="arcWorkDescription" class="form-label">Work Description</label>
                        <textarea class="form-control" id="arcWorkDescription" rows="4" placeholder="Enter the work description" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="arcStartDate" class="form-label">Estimated Start Date</label>
                        <input type="date" class="form-control" id="arcStartDate" required>
                    </div>
                    <div class="mb-3">
                        <label for="arcEndDate" class="form-label">Estimated End Date</label>
                        <input type="date" class="form-control" id="arcEndDate" required>
                    </div>
                    <div class="mb-3">
                        <label for="arcAttachment" class="form-label">Attach ARC Form/Other Documents</label>
                        <input type="file" class="form-control" id="arcAttachment">
                    </div>
                    <button type="submit" class="btn btn-primary">Submit ARC Request</button>
                </form>
            </div>

            <!-- Reservation Request Form -->
            <div id="reservationRequestForm" class="request-form d-none">
                <h3>Reservation Request</h3>

                <!-- Calendar Section -->
                <div class="mb-4 card">
                    <div class="card-body" id="calendarContainer">
                        <!-- Calendar.js will be initialized here -->
                    </div>
                </div>

                <!-- Reservation Form -->
                <form>
                    <div class="mb-3">
                        <label for="reservationProperty" class="form-label">Property</label>
                        <select class="form-select" id="reservationProperty" required>
                            <option selected disabled>Choose a property</option>
                            <option value="Property 1">Property 1</option>
                            <option value="Property 2">Property 2</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="reservationEventDate" class="form-label">Event Date</label>
                        <input type="date" class="form-control" id="reservationEventDate" required>
                    </div>
                    <div class="mb-3">
                        <label for="reservationStartTime" class="form-label">Start Time</label>
                        <input type="time" class="form-control" id="reservationStartTime" required>
                    </div>
                    <div class="mb-3">
                        <label for="reservationEndTime" class="form-label">End Time</label>
                        <input type="time" class="form-control" id="reservationEndTime" required>
                    </div>
                    <div class="mb-3">
                        <label for="reservationEventName" class="form-label">Event Name</label>
                        <input type="text" class="form-control" id="reservationEventName" placeholder="Enter the event name" required>
                    </div>
                    <div class="mb-3">
                        <label for="reservationEventDetails" class="form-label">Event Details</label>
                        <textarea class="form-control" id="reservationEventDetails" rows="4" placeholder="Enter event details" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="reservationAttachment" class="form-label">Attach Documents</label>
                        <input type="file" class="form-control" id="reservationAttachment">
                    </div>
                    <button type="submit" class="btn btn-primary">Submit Reservation Request</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Include Bootstrap JS for basic components -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<!-- Include calendar.js and initialize the calendar for the reservation form -->
<script src="path/to/calendar.js"></script>

<script>
    // Function to handle switching between forms based on request type
    document.querySelectorAll('input[name="requestType"]').forEach((radio) => {
        radio.addEventListener('change', function () {
            document.querySelectorAll('.request-form').forEach(form => form.classList.add('d-none'));
            if (this.value) {
                switch (this.value) {
                    case 'general':
                        document.getElementById('generalRequestForm').classList.remove('d-none');
                        break;
                    case 'arc':
                        document.getElementById('arcRequestForm').classList.remove('d-none');
                        break;
                    case 'reservation':
                        document.getElementById('reservationRequestForm').classList.remove('d-none');
                        initializeCalendar(); // Initialize the calendar when showing the reservation form
                        break;
                }
            }
        });
    });

    // Hide all forms initially
    function initializeCalendar() {
        const calendarContainer = document.getElementById('calendarContainer');
        if (!calendarContainer.classList.contains('initialized')) {
            const calendar = new Calendar(calendarContainer);
            calendar.render();
            calendarContainer.classList.add('initialized'); // Prevent re-initialization
        }
    }
</script>
